<% cache [notification.id, notification.updated_at] do -%>
  <div class="notification <%= notification.variant %>">
    <% case notification.variant -%>
    <% when :group_invite -%>
      <% user = User.find(notification.data["user"]) -%>
      <a href="/group/<%= notification.group.slug %>/members/<%= user.username %>">
        The user <%= display_name(user) %> has requested to join the group: <%= notification.group.title %>
      </a>
    <% when :group_invited -%>
      <a href="/group/<%= notification.group.slug %>/join">
        You have been invited to join the group <%= notification.group.title %> by <%= display_name(User.find(notification.data["user"])) %>
      </a>
    <% when :group_accepted -%>
      <a href="/group/<%= notification.group.slug %>">
        You have been accepted into the group <%= notification.group.title %>
      </a>
    <% when :group_ban -%>
      <% ban = Ban.find(notification.data["ban"]) -%>
      <% if ban.post.present? -%>
        <a href="/group/<%= notification.group.slug %>/posts/<%= ban.post_id %>">
      <% else -%>
        <a href="/group/<%= notification.group.slug %>">
      <% end -%>
        You have been banned from the group <%= notification.group.title %> by <%= display_name(ban.banner) %><br /><%= " for" unless ban.end_date.nil? %> <%= ban.duration_string %><br />
        <%= ban.reason %>
      </a>
    <% when :group_unban -%>
      <% ban = Ban.find(notification.data["ban"]) -%>
      <% if ban.post.present? -%>
        <a href="/group/<%= notification.group.slug %>/posts/<%= ban.post_id %>">
      <% else -%>
        <a href="/group/<%= notification.group.slug %>">
      <% end -%>
        You have been unbanned from the group <%= notification.group.title %> by <%= display_name(ban.banner) %><br />
        <%= ban.reason %>
      </a>

    <% when :ban -%>
      <% ban = Ban.find(notification.data["ban"]) -%>
      <% if ban.post.present? -%>
        <a href="/group/<%= notification.group.slug %>/posts/<%= ban.post_id %>">
      <% else -%>
        <a href="/group/<%= notification.group.slug %>">
      <% end -%>
        You have been banned from League for Gamers <%= notification.group.title %> by <%= display_name(ban.banner) %><%= " for" unless ban.end_date.nil? %> <%= ban.duration_string %><br />
        <%= ban.reason %>
      </a>
    <% when :unban -%>
      <% ban = Ban.find(notification.data["ban"]) -%>
      <% if ban.post.present? -%>
        <a href="/group/<%= notification.group.slug %>/posts/<%= ban.post_id %>">
      <% else -%>
        <a href="/group/<%= notification.group.slug %>">
      <% end -%>
        You have been unbanned from League for Gamers by <%= display_name(ban.banner) %><br />
        <%= ban.reason %>
      </a>
    <% when "new_comment" %>
      <% if notification.group.present? -%>
        <a href="/group/<%= notification.group.slug %>/posts/<%= notification.post.parent_id %>#comment-<%= notification.post_id %>">
      <% else -%>
        <a href="/feed/user/<%= notification.user.username %>/<%= notification.post.parent_id %>#comment-<%= notification.post_id %>">
      <% end -%>

        <%= display_name(User.find(notification.data["user"])) %> has commented on your post <%= "in group #{notification.group.title}" if notification.group.present? %>
      </a>
    <% when :mention -%>

    <% end -%>
  </div>
<% end -%>